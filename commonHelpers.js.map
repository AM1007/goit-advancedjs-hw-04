{"version":3,"file":"commonHelpers.js","sources":["../src/js/request.js","../src/js/stats.js","../src/js/markup.js","../src/js/messages.js","../src/js/index.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\naxios.defaults.params = {\n  image_type: 'photo',\n  orientation: 'horizontal',\n  per_page: 40,\n  key: '32013564-eb97bf6234748c3565a98072a',\n};\n\nexport const getImages = async (query, page) => {\n  const { data } = await axios.get('', {\n    params: {\n      q: query,\n      page,\n    },\n  });\n  return data;\n};\n","/**\n * Formatting large numeric values for photocard statistics\n * @param {*} number\n * @returns\n */\nexport default function numberText(number) {\n  let outputNumber = null;\n  switch (true) {\n    case number >= 100000000:\n      outputNumber = Math.round(number / 1000000);\n      return `${outputNumber}M`;\n      break;\n    case number >= 1000000:\n      outputNumber = Math.round(number / 100000) / 10;\n      return `${outputNumber}M`;\n      break;\n    case number >= 100000:\n      outputNumber = Math.round(number / 1000);\n      return `${outputNumber}k`;\n      break;\n    case number >= 1000:\n      outputNumber = Math.round(number / 100) / 10;\n      return `${outputNumber}k`;\n      break;\n    default:\n      return number;\n      break;\n  }\n}\n","import numberText from './stats';\nimport 'boxicons';\n\n/**\n * create Markup function\n * @param {*} data\n * @returns\n */\nexport default function createMarkup(data) {\n  return data\n    .map(\n      ({\n        tags,\n        webformatURL,\n        largeImageURL,\n        views,\n        downloads,\n        likes,\n        comments,\n      }) => `\n<li class=\"photo-card\">\n  <a href=\"${largeImageURL}\" class=\"photo-card-link\">\n    <img class=\"photo-card-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n  </a>\n  <div class=\"info\">\n    <p class=\"info-item likes\">\n    <box-icon name='heart' color='#f3f3f3'></box-icon>\n      ${numberText(likes)}\n    </p>\n    <p class=\"info-item\">\n    <box-icon name='show-alt'color='#f3f3f3'></box-icon>\n      ${numberText(views)}\n    </p>\n    <p class=\"info-item\">\n    <box-icon name='chat'color='#f3f3f3'></box-icon>\n      ${numberText(comments)}\n    </p>\n    <p class=\"info-item\">\n    <box-icon name='download' type='solid' color='#f3f3f3' ></box-icon>\n      ${numberText(downloads)}\n    </p>\n  </div>\n</li>\n`\n    )\n    .join('');\n}\n","import iziToast from 'izitoast';\n\nconst IziToastSettings = {\n  timeout: 3000,\n  close: false,\n  closeOnClick: true,\n  icon: null,\n  position: 'topRight',\n  transitionIn: 'fadeInDown',\n  transitionOut: 'fadeOutUp',\n};\n\nexport class Messages {\n  static success(message) {\n    iziToast.success({\n      title: 'OK',\n      titleColor: 'green',\n      message: message,\n      messageColor: 'green',\n\n      progressBarColor: 'green',\n      ...IziToastSettings,\n    });\n  }\n  static error(message) {\n    iziToast.error({\n      title: 'Error',\n      titleColor: 'red',\n      message: message,\n      messageColor: 'red',\n      progressBarColor: 'red',\n      ...IziToastSettings,\n    });\n  }\n  static warning(message) {\n    iziToast.warning({\n      title: 'Caution',\n      message: message,\n      titleColor: 'red',\n      messageColor: 'red',\n      progressBarColor: 'red',\n      ...IziToastSettings,\n    });\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport { getImages } from './request.js';\nimport createMarkup from './markup.js';\nimport { Messages } from './messages.js';\n\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\n\nlet page = 1;\nlet query = '';\nlet totalHits = 0;\nlet totalPages = 1;\n\nconst options = {\n  rootMargin: '200px',\n  threshold: 0.1,\n};\n\nconst lightBox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  animationSpeed: 250,\n  overlay: true,\n  showCounter: false,\n  fadeSpeed: 200,\n  close: true,\n  showCounter: true,\n});\n\n/**\n * Callback for Intersection Observer\n * @param {*} entries\n * @param {*} observer\n */\nfunction onEntry(entries, observer) {\n  entries.forEach(async entry => {\n    if (entry.isIntersecting) {\n      observer.unobserve(entry.target);\n      await makeRender();\n    }\n  });\n}\n\nconst observer = new IntersectionObserver(onEntry, options);\n\n/**\n * Processing the form submit event\n * @param {*} e\n * @returns\n */\nasync function querySubmitHandler(e) {\n  e.preventDefault();\n  if (e.target.elements.searchQuery.value.trim() === '') {\n    return Messages.error('Please enter a search query!');\n  }\n  if (e.target.elements.searchQuery.value.trim() === query) {\n    return Messages.warning('Please enter a new search query! Or scroll down');\n  }\n  await makeRender();\n}\n\n/**\n * Checking and processing changes in the search query\n * @returns\n */\nfunction queryChecker() {\n  const newQuery = form.elements.searchQuery.value.trim();\n  if (newQuery !== query) {\n    page = 1;\n    totalPages = 1;\n    query = newQuery;\n    return true;\n  } else {\n    page += 1;\n    return false;\n  }\n}\n\n/**\n * Gallery update function\n * @returns\n */\nasync function makeRender() {\n  const isFirstQuery = queryChecker();\n  if (isFirstQuery) {\n    gallery.innerHTML = '';\n  }\n\n  if (page > totalPages) {\n    Messages.warning('No more images');\n    return;\n  }\n  let hits;\n  try {\n    const data = await getImages(query, page);\n    hits = data.hits;\n    totalHits = data.totalHits;\n    totalPages = Math.ceil(totalHits / 40);\n  } catch (error) {\n    Messages.error(error.message);\n  }\n\n  if (!hits.length) {\n    Messages.error(\n      'Sorry, there are no images matching your search query. Please try again.'\n    );\n    return;\n  }\n  if (isFirstQuery) {\n    const massage = `\"Hooray! We found ${totalHits} images.\"`;\n    Messages.success(massage);\n  }\n  gallery.insertAdjacentHTML('beforeend', createMarkup(hits));\n  observer.observe(gallery.lastElementChild);\n  lightBox.refresh();\n}\n\nform.addEventListener('submit', querySubmitHandler);\n"],"names":["axios","getImages","query","page","data","numberText","number","outputNumber","createMarkup","tags","webformatURL","largeImageURL","views","downloads","likes","comments","IziToastSettings","Messages","message","iziToast","form","gallery","totalHits","totalPages","options","lightBox","SimpleLightbox","onEntry","entries","observer","entry","makeRender","querySubmitHandler","e","queryChecker","newQuery","isFirstQuery","hits","error","massage"],"mappings":"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"}